# comments_summary

Проект по саммаризации и извлечению ключевых слов из отзывов покупателей на товары.

##TODO
- настроить БД и включить log_request в ручки
- докер
- докер компоуз
- проверка - если нет гпу, то выводить надпись - саммари не будет
- сделать ручку типа я микросервис и я живой 
- придумать зачем очереди
- придумать слейку стримлита и nginx


## структура проекта

### app/
-  **main.py**: FastAPI-приложения; здесь создаётся экземпляр приложения и подключаются роутеры
- **api.py**: определение API-эндпоинтов для суммаризации отзывов, извлечения ключевых слов и запуска асинхронного инференса
- **models.py**: функции-обёртки для вызова моделей (суммаризация, извлечение ключевых слов)
- **tasks.py**: определение задач для Celery (асинхронный инференс и обновление статусов в БД??? TODO: подумать как следует)
- **database.py**: подключение и работа с PostgreSQL (логирование обращений, обновление статусов задач)
- **config.py**: конфиг проекта (настройки, переменные окружения, параметры подключения к БД и брокеру сообщений). локально храним в .env, потом надо сделать yaml файлы (TODO: ci/cd кажется удобней в гитлабе, чем в гитхабе, возможно перееду)

### streamlit_app/
- **app.py**: Визуальное представление результатов обработки отзывов с использованием Streamlit.

### static/  Статические файлы (CSS?? изображения?? TODO: продумать что именно)
- css/
- images/

### nginx/
 - **nginx.conf**         # конфиг nginx для reverse proxy, маршрутизации запросов к API и отдавания статики

###  docker/
- **dockerfile.app**: докер для сборки образа FastAPI-приложения (ASGI-сервер, uvicorn/gunicorn).
- **dockerfile.celery**: докер для сборки образа Celery-воркера для асинхронного выполнения задач.
- **dockerfile.streamlit**: докер для сборки образа Streamlit-визуала.
- **dockerfile.static**: докер для сборки образа для сервиса отдачи статики (на базе nginx??).

### research/
неупорядоченные юпитер тетрадки

- **docker-compose.yml**: определение всех необходимых сервисов (API, Celery, Streamlit, PostgreSQL, RabbitMQ/Redis???, Nginx) для развёртывания проекта.
- **requirements.txt**: пакеты python (FastAPI, uvicorn, celery, SQLAlchemy, psycopg2, и т.п.)
- **README.md**: описание проекта, инструкция по запуску и настройке

## Установка

1. Клонировать репозиторий:
   ```bash
   git clone git@github.com:DariaMishina/comments_summary.git
   cd comments_summary
   ```

2. для запуска в docker
- создаем docker образ
    ```bash
    docker build -t simple_model:latest .
    ```
- запускаем docker контейнер (порт 7290 для мэппинга выбран произвольно)
    ```bash
    docker run -p 7290:80 simple_model:latest
    ```